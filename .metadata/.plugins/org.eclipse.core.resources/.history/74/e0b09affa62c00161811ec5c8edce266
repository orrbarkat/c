/*
 * SPPoint.c
 *
 *  Created on: May 28, 2016
 *      Author: user
 */

#include "SPPoint.h"

struct sp_point_t{
	int index;
	double* data;
	int dim;
};

SPPoint spPointCreate(double* data, int dim, int index){
	assert (index>=0 && dim>1);
    int i;
    SPPoint point = (SPPoint) malloc(sizeof(struct sp_point_t));
    if (!point){
        free(point);
        return NULL;
    }
    
    point->data = (double*)malloc(dim * sizeof(double));
    if(!point->data){
        free(point->data);
        free(point);
        return NULL;
    }
    point->index = index;
    point->dim = dim;

	for (i=0; i<dim; i++){
		(point->data)[i]= data[i];
	}
	return point;
}


SPPoint spPointCopy(SPPoint source){
	assert(source);
	SPPoint res;
	res = spPointCreate(source->data, source->dim, source->index);
	return res;
}


void spPointDestroy(SPPoint point){
	free(point->data);
	free(point);
}


int spPointGetDimension(SPPoint point){
	assert(point);
	return point->dim;
}


int spPointGetIndex(SPPoint point){
	assert(point);
	return point->index;
}


double spPointGetAxisCoor(SPPoint point, int axis){
	assert(point);
	assert(axis>=0 && axis<point->dim);
	return point->data[axis];
}


double spPointL2SquaredDistance(SPPoint p, SPPoint q){
	assert(p && q && (p->dim ==q->dim));
	double res = 0.0;
	for (int i; i<p->dim; i++){
		res += (p->data[i]-q->data[i])*(p->data[i]-q->data[i]);
	}
	return res;
}


